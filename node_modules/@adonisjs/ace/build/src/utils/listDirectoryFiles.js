"use strict";
/*
 * @adonisjs/ace
 *
 * (c) Harminder Virk <virk@adonisjs.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
*/
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const slash_1 = __importDefault(require("slash"));
const path_1 = require("path");
const utils_1 = require("@poppinss/utils");
/**
 * Returns an array of Javascript files inside the current directory in
 * relative to the application root.
 */
function listDirectoryFiles(scanDirectory, appRoot, filterFn) {
    return utils_1.fsReadAll(scanDirectory)
        .filter((name) => !name.endsWith('.json')) // remove .json files
        .map((name) => {
        const relativePath = path_1.relative(appRoot, path_1.join(scanDirectory, name));
        return slash_1.default(relativePath.startsWith('../') ? relativePath : `./${relativePath}`);
    })
        .filter((name) => {
        if (typeof (filterFn) === 'function') {
            return filterFn(name);
        }
        return Array.isArray(filterFn) ? !filterFn.includes(name) : true;
    });
}
exports.listDirectoryFiles = listDirectoryFiles;
